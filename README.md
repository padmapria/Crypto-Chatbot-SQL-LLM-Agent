# Crypto-Chatbot-SQL-LLM-Agent :  An AI Agentic Crypto Advisor
### Ask, analyze, and act on real-time cryptocurrency data ðŸ’°
A conversational AI agent that interacts with a SQL database to provide information on cryptocurrencies.

##  Overview
This project leverages cutting-edge technologies to build a conversational AI chat interface for querying cryptocurrency data. The tech stack includes:
- Large Language Models (LLMs): Providing accurate and informative responses
- SQL databases: Storing and managing cryptocurrency data
- LangChain: Enabling Retrieval-Augmented Generation (RAG) for efficient query processing
- LangGraph: Orchestrating the interaction between components, managing information flow, and handling fallback mechanisms for robust query processing
- SQL Query Generation: Automatically generating SQL queries based on users question in plain text, enabling seamless interaction with the database
- Streamlit: Powering the interactive chat interface
- Docker: Ensuring seamless deployment and containerization
This innovative combination of technologies enables a scalable, efficient, and user-friendly chat interface for exploring cryptocurrency data.

##  Architecture
- Agent: Entry point for user questions, determining the user question's type and directing it to the relevant node.
- RAG (Retrieval-Augmented Generation):  Retrieves answers from the SQL database using a SQL query generated by LLM for users' questions in plain text, for specific and relevant questions (related to the 4 currencies BTC, ETH, SOL, and DOT, as mentioned below)..
- LLM (Large Language Model): Generates responses to user questions, either by:
  - Using retrieved data from RAG, for specific questions.
  - Providing general information directly, for generic questions.

## Features
- Interact with a SQL database using natural language queries
- Retrieve cryptocurrency data (e.g., prices, trends)
- Supports multiple cryptocurrencies (e.g., Bitcoin, Ethereum)
- Supports general knowledge queries with LLM
- Built using LLMs for accurate and informative responses
- Streamlit-based UI for easy user interaction

## Orchestration and Fallback Mechanisms
LangGraph is used to orchestrate the interaction between the Agent, RAG, LLM, and Streamlit UI. The graph defines the flow of information and handles fallback mechanisms to ensure robust query processing.

#### The graph is designed to handle the following scenarios:
- Relevant user question redirected to RAG: The Edge Router directs the user question to the RAG node, which generates SQL query and retrieves data from the SQL database, and the LLM node generates a response.
- Relevant user question incase of RAG failure: The RAG node fails to retrieve data and provides a default response.
- Generic user question: The Edge Router directs the user question to the LLM node directly, which generates a response. If the LLM node fails, a default response is provided.

![image](https://github.com/user-attachments/assets/cd31e6de-c56f-4a89-8ff5-35601ae3b3d4)

##### Response from RAG for relavent question
![image](https://github.com/user-attachments/assets/2ed95a6a-9869-4250-844a-06a44f235413)

##### Response from LLM for generic questions 
![image](https://github.com/user-attachments/assets/c6987b9b-e521-457c-ac99-c36e85e5e28a)



## Data
- Data is downloaded from www.marketwatch.com
- I tested this project on BTC, ETH, SOL and DOT.(Refer the data folder for the links)
- Sample url for downloading btcusd file is as below 
https://www.marketwatch.com/investing/cryptocurrency/btcusd/download-data?startDate=4/1/2024&endDate=9/30/2024

### Here are the advantages of using the LLM SQL Agent application:

#### User Benefits
- Easy access to cryptocurrency data
- Natural language querying for non-technical users
- Fast and accurate responses
- Interactive chat interface for improved user experience
- Supports multiple cryptocurrencies
- Handles general knowledge queries through fallback mechanism

#### Business Benefits
- Enhanced decision-making with data-driven insights
- Improved operational efficiency through automation
- Reduced manual data analysis and querying time
- Scalable solution for growing cryptocurrency datasets
- Integration with existing SQL databases

####  Technical Benefits
- Leverages Large Language Models (LLMs) for accurate responses
- Utilizes SQL databases for structured data storage
- Streamlit-based UI for easy deployment and maintenance
- Modular architecture for easy extension and customization
- Compatible with various cryptocurrency data sources
- Orchestrated workflow using LangGraph for seamless interaction between LLM, SQL database, and UI
- Robust fallback mechanisms to handle errors and exceptions, ensuring minimal downtime and improved user experien

#### Analytical Benefits
- Real-time data analysis and visualization
- Identifies trends and patterns in cryptocurrency markets
- Provides actionable insights for investment decisions
- Supports historical data analysis for predictive modeling
- Enables data-driven strategy development

#### Educational Benefits
- Interactive learning tool for cryptocurrency and data analysis
- Demonstrates applications of LLMs and SQL databases
- Develops critical thinking and problem-solving skills
- Enhances data literacy and interpretation abilities
- Supports academic research and projects

By using the LLM SQL Agent application, users can unlock these benefits and improve their cryptocurrency data analysis and decision-making processes.

<h2> How to run our LLM SQL Agent</h2>

<b>OpenAI</b><br/>
- OpenAI provides the API for accessing powerful language models like GPT-3.5 Turbo.<br/>
- In this application, the OpenAI API is used to generate responses based on the data retrieved from Elasticsearch, for the query passed from the chatbot.<br/>

**Note:** OpenAI immediately revokes the API key once it detects that the key has been exposed publicly. Therefore, do not expose your API key.<br/>
<br/>
Generate your OpenAI API key here: [Click Here](https://platform.openai.com/account/api-keys)

1. Clone this git repository from command prompt<br/>
git clone https://github.com/padmapria/Crypto-Chatbot-SQL-LLM-Agent.git    
cd Crypto-Chatbot-SQL-LLM-Agent    

2. Create a `.env` file inside both the 'app' folder and the notebooks folder and store the key as follows:     
OPENAI_API_KEY=YOUR_API_KEY_HERE<br/>

. Refer to the key in `rag.py` by:  
```python   
from dotenv import load_dotenv   
load_dotenv()   
openai_api_key = os.getenv("OPENAI_API_KEY")    
```
3. The application can be tested via jupyter notebook or via streamlit UI deployed via docker.

## Deploy via docker 
1. Install Docker Desktop on your computer and start Docker Desktop    

2. Start the application by running the command from the command prompt <br/>
docker compose up -d

3. Access the deployed application from the brower..        
http://localhost:8501

## Test the application via UI
- Upload a CSV file containing cryptocurrency data (refer the data folder)
- Enter natural language queries in the chat interface
- Receive informative responses from the LLM SQL agent
  ![streamlit_ui](images/btc_sample.jpg)
  ![streamlit_ui](images/dot_sample.jpg)
  ![streamlit_ui](images/sample_query.jpg)

### Acknowledgement
The project utilizes data from www.marketwatch.com, and leverages LLM model APIs provided by Langchain and OpenAI.
